# Лабораторная работа 4
## Цель задания
> Разработать приложение для получения курсов валют с сайта Центробанка России, используя объектно-ориентированный подход и архитектурный паттерн MVC (Model-View-Controller).
> Требования к функционалу
> Компонент Model:

>- Представляет собой класс CurrencyRates, который отправляет запросы к сайту ЦБ РФ.

>- На вход принимает список отслеживаемых валют (строки длины три, например, ["USD", "EUR", "GBP"]).

>- Реализует паттерн "Одиночка" (Singleton), чтобы в приложении существовал только один объект данного класса.

>- Использует геттер для получения текущих курсов валют.

> -Использует сеттер для обновления списка отслеживаемых валют.

> Компонент View:

>- Использует шаблонизатор Jinja2 или какую-либо другую библиотеку (пример) для отображения данных.

>- Позволяет пользователю просматривать курсы валют в удобном формате.

> Компонент Controller:

>- Обрабатывает запросы и управляет логикой приложения.

>- Сохраняет полученные данные в базу данных SQLite3 (реализован именованный стиль для параметризации запросов в БД).

>- Передаёт данные в представление для отображения.

> Дополнительные требования
>- Данные должны загружаться с официального API или XML-файла Центробанка России.

>- Для взаимодействия с API можно использовать библиотеку requests.

>- Использование библиотек sqlite3 для работы с базой данных и jinja2 для шаблонов.

> Этапы выполнения
> -Реализовать класс CurrencyRates (паттерн "Одиночка").

> -Реализовать контроллер для обработки запросов и сохранения данных в SQLite3.

> -Разработать шаблоны на Jinja2 для отображения информации.

> -Написать код для интеграции всех компонентов в MVC-структуре.

> Протестировать приложение, проверив работу с разными валютами.

### Результат:

Структура проекта

![Лабораторная работа 4. Задание 1](https://github.com/Stepanova-Anna/Programming-2/blob/main/LR4-4sem/2.png)

Вывод данных: 

![Лабораторная работа 4. Задание 1](https://github.com/Stepanova-Anna/Programming-2/blob/main/LR4-4sem/1.png)

**Особенности реализации:**
- Полностью соответствует требованиям MVC

- Использует Singleton для модели CurrencyRates

- Сохраняет данные в SQLite

- Отображает курсы через Jinja2 шаблоны

- Получает актуальные курсы с сайта ЦБ РФ

Модель 
```
class CurrencyRates:
    _instance = None  # Хранит единственный экземпляр класса (Singleton)
    
    def __new__(cls, currencies=None):
        if cls._instance is None:  # Проверка существования экземпляра
            cls._instance = super().__new__(cls)  # Создание экземпляра
            cls._instance.currencies = currencies or ["USD", "EUR", "GBP"]  # Дефолтные валюты
            cls._instance.rates = {}  # Хранение текущих курсов
            cls._instance.fetch_rates()  # Первоначальная загрузка
        return cls._instance
```
**Методы:**

`fetch_rates():`

- Делает GET-запрос к API ЦБ РФ

- Парсит XML-ответ с помощью ElementTree

- Рассчитывает курс с учетом номинала (например, для 1 USD вместо 100 JPY)

- Сохраняет дату обновления

`get_rates():` Возвращает текущие курсы

`set_currencies():` Обновляет список отслеживаемых валют

Паттерн: `Singleton` гарантирует единственный экземпляр модели в приложении.
